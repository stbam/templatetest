{"ast":null,"code":"import React,{useRef,useState,useEffect}from\"react\";import\"./Canvas.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Canvas(){const[isDrawing,setIsDrawing]=useState(false);const[color,setColor]=useState(\"#3B3B3B\");const[size,setSize]=useState(\"3\");const canvasRef=useRef(null);const ctx=useRef(null);const timeout=useRef(null);const[cursor,setCursor]=useState(\"default\");/*useEffect(() => {\n    const canvas = canvasRef.current;\n    ctx.current = canvas.getContext(\"2d\");\n\n    //Resizing\n    canvas.height = window.innerHeight * 0.8;\n    canvas.width = window.innerWidth * 0.45;\n\n    //Load from locastorage\n    const canvasimg = localStorage.getItem(\"canvasimg\");\n    if (canvasimg) {\n      var image = new Image();\n      ctx.current = canvas.getContext(\"2d\");\n      image.onload = function () {\n        ctx.current.drawImage(image, 0, 0);\n        setIsDrawing(false);\n      };\n      image.src = canvasimg;\n    }\n  }, [ctx]);*/useEffect(()=>{const canvas=canvasRef.current;ctx.current=canvas.getContext(\"2d\");// Resizing\ncanvas.height=window.innerHeight*0.8;canvas.width=window.innerWidth*0.45;// Remove the following code related to local storage\n/*\n    const canvasimg = localStorage.getItem(\"canvasimg\");\n    if (canvasimg) {\n      var image = new Image();\n      ctx.current = canvas.getContext(\"2d\");\n      image.onload = function () {\n        ctx.current.drawImage(image, 0, 0);\n        setIsDrawing(false);\n      };\n      image.src = canvasimg;\n    }\n    */},[]);const startPosition=_ref=>{let{nativeEvent}=_ref;setIsDrawing(true);draw(nativeEvent);};const finishedPosition=()=>{setIsDrawing(false);ctx.current.beginPath();};const draw=_ref2=>{let{nativeEvent}=_ref2;if(!isDrawing){return;}const canvas=canvasRef.current;const canvasRect=canvas.getBoundingClientRect();// Get the canvas position\nctx.current=canvas.getContext(\"2d\");const x=nativeEvent.clientX-canvasRect.left;// Adjust x-coordinate\nconst y=nativeEvent.clientY-canvasRect.top;// Adjust y-coordinate\nctx.current.lineWidth=size;ctx.current.lineCap=\"round\";ctx.current.strokeStyle=color;ctx.current.lineTo(x,y);ctx.current.stroke();ctx.current.beginPath();ctx.current.moveTo(x,y);if(timeout.current!==undefined)clearTimeout(timeout.current);timeout.current=setTimeout(function(){var base64ImageData=canvas.toDataURL(\"image/png\");localStorage.setItem(\"canvasimg\",base64ImageData);},400);};const clearCanvas=()=>{localStorage.removeItem(\"canvasimg\");const canvas=canvasRef.current;const context=canvas.getContext(\"2d\");context.fillStyle=\"white\";context.fillRect(0,0,canvas.width,canvas.height);//Passing clear screen\nif(timeout.current!==undefined)clearTimeout(timeout.current);timeout.current=setTimeout(function(){var base64ImageData=canvas.toDataURL(\"image/png\");localStorage.setItem(\"canvasimg\",base64ImageData);},400);};const getPen=()=>{setCursor(\"default\");setSize(\"3\");setColor(\"#3B3B3B\");};const eraseCanvas=()=>{setCursor(\"grab\");setSize(\"20\");setColor(\"#FFFFFF\");if(!isDrawing){return;}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"canvas\",{id:\"canvas\",style:{cursor:cursor},onMouseDown:startPosition,onMouseUp:finishedPosition,onMouseMove:draw,ref:canvasRef}),/*#__PURE__*/_jsxs(\"div\",{className:\"canvas-controls\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:getPen,className:\"btn-width\",children:\"Pencil\"}),/*#__PURE__*/_jsx(\"input\",{type:\"color\",value:color,onChange:e=>setColor(e.target.value),className:\"btn-width\"}),/*#__PURE__*/_jsxs(\"select\",{value:size,onChange:e=>setSize(e.target.value),className:\"btn-width\",children:[/*#__PURE__*/_jsx(\"option\",{children:\" 1 \"}),/*#__PURE__*/_jsx(\"option\",{children:\" 3 \"}),/*#__PURE__*/_jsx(\"option\",{children:\" 5 \"}),/*#__PURE__*/_jsx(\"option\",{children:\" 10 \"}),/*#__PURE__*/_jsx(\"option\",{children:\" 15 \"}),/*#__PURE__*/_jsx(\"option\",{children:\" 20 \"}),/*#__PURE__*/_jsx(\"option\",{children:\" 25 \"}),/*#__PURE__*/_jsx(\"option\",{children:\" 30 \"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:clearCanvas,className:\"btn-width\",children:\"Clear\"}),/*#__PURE__*/_jsx(\"button\",{onClick:eraseCanvas,className:\"btn-width\",children:\"Erase\"})]})]});}","map":{"version":3,"names":["React","useRef","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Canvas","isDrawing","setIsDrawing","color","setColor","size","setSize","canvasRef","ctx","timeout","cursor","setCursor","canvas","current","getContext","height","window","innerHeight","width","innerWidth","startPosition","_ref","nativeEvent","draw","finishedPosition","beginPath","_ref2","canvasRect","getBoundingClientRect","x","clientX","left","y","clientY","top","lineWidth","lineCap","strokeStyle","lineTo","stroke","moveTo","undefined","clearTimeout","setTimeout","base64ImageData","toDataURL","localStorage","setItem","clearCanvas","removeItem","context","fillStyle","fillRect","getPen","eraseCanvas","children","id","style","onMouseDown","onMouseUp","onMouseMove","ref","className","onClick","type","value","onChange","e","target"],"sources":["/Users/stanislav/practical_web_dev_class/traversy/log-in-react/disp/upload/login-signup/src/components/Canvas.jsx"],"sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\nimport \"./Canvas.css\";\n\nexport default function Canvas() {\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [color, setColor] = useState(\"#3B3B3B\");\n  const [size, setSize] = useState(\"3\");\n  const canvasRef = useRef(null);\n  const ctx = useRef(null);\n  const timeout = useRef(null);\n  const [cursor, setCursor] = useState(\"default\");\n\n  /*useEffect(() => {\n    const canvas = canvasRef.current;\n    ctx.current = canvas.getContext(\"2d\");\n\n    //Resizing\n    canvas.height = window.innerHeight * 0.8;\n    canvas.width = window.innerWidth * 0.45;\n\n    //Load from locastorage\n    const canvasimg = localStorage.getItem(\"canvasimg\");\n    if (canvasimg) {\n      var image = new Image();\n      ctx.current = canvas.getContext(\"2d\");\n      image.onload = function () {\n        ctx.current.drawImage(image, 0, 0);\n        setIsDrawing(false);\n      };\n      image.src = canvasimg;\n    }\n  }, [ctx]);*/\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    ctx.current = canvas.getContext(\"2d\");\n  \n    // Resizing\n    canvas.height = window.innerHeight * 0.8;\n    canvas.width = window.innerWidth * 0.45;\n  \n    // Remove the following code related to local storage\n    /*\n    const canvasimg = localStorage.getItem(\"canvasimg\");\n    if (canvasimg) {\n      var image = new Image();\n      ctx.current = canvas.getContext(\"2d\");\n      image.onload = function () {\n        ctx.current.drawImage(image, 0, 0);\n        setIsDrawing(false);\n      };\n      image.src = canvasimg;\n    }\n    */\n  }, []);\n  \n\n  const startPosition = ({ nativeEvent }) => {\n    setIsDrawing(true);\n    draw(nativeEvent);\n  };\n\n  const finishedPosition = () => {\n    setIsDrawing(false);\n    ctx.current.beginPath();\n  };\n\n  const draw = ({ nativeEvent }) => {\n    if (!isDrawing) {\n      return;\n    }\n    const canvas = canvasRef.current;\n    const canvasRect = canvas.getBoundingClientRect(); // Get the canvas position\n    ctx.current = canvas.getContext(\"2d\");\n\n    const x = nativeEvent.clientX - canvasRect.left; // Adjust x-coordinate\n    const y = nativeEvent.clientY - canvasRect.top; // Adjust y-coordinate\n\n    ctx.current.lineWidth = size;\n    ctx.current.lineCap = \"round\";\n    ctx.current.strokeStyle = color;\n\n    ctx.current.lineTo(x, y);\n    ctx.current.stroke();\n    ctx.current.beginPath();\n    ctx.current.moveTo(x, y);\n\n    if (timeout.current !== undefined) clearTimeout(timeout.current);\n    timeout.current = setTimeout(function () {\n      var base64ImageData = canvas.toDataURL(\"image/png\");\n      localStorage.setItem(\"canvasimg\", base64ImageData);\n    }, 400);\n  };\n\n  const clearCanvas = () => {\n    localStorage.removeItem(\"canvasimg\");\n    const canvas = canvasRef.current;\n    const context = canvas.getContext(\"2d\");\n    context.fillStyle = \"white\";\n    context.fillRect(0, 0, canvas.width, canvas.height);\n\n    //Passing clear screen\n    if (timeout.current !== undefined) clearTimeout(timeout.current);\n    timeout.current = setTimeout(function () {\n      var base64ImageData = canvas.toDataURL(\"image/png\");\n      localStorage.setItem(\"canvasimg\", base64ImageData);\n    }, 400);\n  };\n\n  const getPen = () => {\n    setCursor(\"default\");\n    setSize(\"3\");\n    setColor(\"#3B3B3B\");\n  };\n\n  const eraseCanvas = () => {\n    setCursor(\"grab\");\n    setSize(\"20\");\n    setColor(\"#FFFFFF\");\n\n    if (!isDrawing) {\n      return;\n    }\n  };\n\n  return (\n    <>\n      <canvas\n        id=\"canvas\"\n        style={{ cursor: cursor }}\n        onMouseDown={startPosition}\n        onMouseUp={finishedPosition}\n        onMouseMove={draw}\n        ref={canvasRef}\n      />\n      <div className=\"canvas-controls\">\n        <button onClick={getPen} className=\"btn-width\">\n          Pencil\n        </button>\n        <input\n          type=\"color\"\n          value={color}\n          onChange={(e) => setColor(e.target.value)}\n          className=\"btn-width\"\n        />\n        <select\n          value={size}\n          onChange={(e) => setSize(e.target.value)}\n          className=\"btn-width\"\n        >\n          <option> 1 </option>\n          <option> 3 </option>\n          <option> 5 </option>\n          <option> 10 </option>\n          <option> 15 </option>\n          <option> 20 </option>\n          <option> 25 </option>\n          <option> 30 </option>\n        </select>\n        <button onClick={clearCanvas} className=\"btn-width\">\n          Clear\n        </button>\n        <button onClick={eraseCanvas} className=\"btn-width\">\n          Erase\n        </button>\n      </div>\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}